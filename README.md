# ì¹´í˜ ì¶”ì²œ í”„ë¡œì íŠ¸ â˜•
## ğŸ“„ í”„ë¡œì íŠ¸ ëª©ì  ë° ì„¤ëª…
* ### ëª©ì 
   * Firebaseì™€ Context Apië¥¼ ì´ìš©í•´ Authenticationë¥¼ ì´í•´ ë° í•™ìŠµ
   * Kakao Map APIë¥¼ ì´ìš©í•´ ì§€ë„ êµ¬í˜„
   * Firestoreì™€ Reduxë¥¼ ì—°ë™í•˜ì—¬ Kakao Mapì—ì„œ ì¹´í˜ë¥¼ ì°¾ì•„ ë‚˜ì˜ ì¹´í˜ ë¦¬ìŠ¤íŠ¸ì— ì¹´í…Œê³ ë¦¬ ë³„ë¡œ ì¶”ê°€ 
   * Firestoreì™€ Reduxë¥¼ ì—°ë™í•˜ì—¬ ì¹´í˜ ë¦¬ìŠ¤íŠ¸ì— ì¶”ì²œëœ ì¹´í˜ ì¢‹ì•„ìš” ê³µìœ  ê¸°ëŠ¥ êµ¬í˜„
* ### ì„¤ëª…
   * #### Authentication í˜ì´ì§€ (ë¡œê·¸ì¸/íšŒì›ê°€ì…)
      * Context APIë¥¼ firebaseì— ì—°ë™í•˜ì—¬ Authentication ìƒíƒœê´€ë¦¬
      * ë¡œê·¸ì¸/íšŒì›ê°€ì… async/awaitë¥¼ ì´ìš©í•´ì„œ ë¹„ë™ê¸° ì²˜ë¦¬
      * ì¡°ê±´ë¬¸, Firebase ì—ëŸ¬ì½”ë“œë¥¼ ì´ìš©í•´ì„œ ìœ íš¨ì„±ê²€ì‚¬ 
      * firebaseë¥¼ ì´ìš©í•œ ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° êµ¬í˜„
      * react hooksë¥¼ ì´ìš©í•´ ë¡œê·¸ì¸ ìœ ì €ì˜ ìƒíƒœê´€ë¦¬
   * #### Kakao Map í˜ì´ì§€
      * Kakao Map APIë¥¼ ì´ìš©í•´ì„œ ì§€ë„ ê°€ì ¸ì˜¤ê¸°
      * ê²€ìƒ‰ì°½ì— ì›í•˜ëŠ” ì¹´í˜ ë° ì¥ì†Œ ì…ë ¥ ì‹œ marker ë„ìš°ê¸°
      * ì¹´í˜ ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ í´ë¦­ ì‹œ ì£¼ë³€ ì¹´í˜ marker ë„ìš°ê¸°
      * Context APIë¥¼ ì´ìš©í•´ì„œ ê²€ìƒ‰í•œ ì¹´í˜ ë° ì¥ì†Œ ìƒíƒœê´€ë¦¬
      * Reduxë¥¼ ì´ìš©í•´ì„œ ë¡œê·¸ì¸ ìœ ì €ë§Œì´ ê²€ìƒ‰í•œ ì¹´í˜ë¥¼ ì¹´í…Œê³ ë¦¬ë³„ë¡œ ì¶”ê°€ êµ¬í˜„
      * OpenWeatherMap APIë¥¼ ì´ìš©í•´ì„œ í˜„ì¬ ìœ„ì¹˜í•œ ì¥ì†Œì˜ ë‚ ì”¨ ë¶ˆëŸ¬ì˜¤ê¸°
   * #### DashBoard í˜ì´ì§€
      * Reduxë¥¼ ì´ìš©í•´ì„œ ì¶”ì²œ ì¹´í˜ ìƒíƒœê´€ë¦¬ (ì¶”ê°€ ë° ì‚­ì œ)
      * Firestoreì™€ react hooksë¥¼ ì´ìš©í•´ì„œ ì¢‹ì•„ìš” ê¸°ëŠ¥ êµ¬í˜„ 
      * ì¶”ì²œ ì¹´í˜ ë¦¬ìŠ¤íŠ¸ì— Pagination ê¸°ëŠ¥ êµ¬í˜„
--- 
## ğŸ›  ê°œë°œ ê¸°ê°„ ë° ì‚¬ìš© ê¸°ìˆ 
- **ê°œë°œ ê¸°ê°„** : 2022-07-09 ~ 2022-10-10
* **ì‚¬ìš© ê¸°ìˆ ** 

  <img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white">
  <img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white">
  <img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
  <br />
  <img src="https://img.shields.io/badge/React-61DAFB?style=for-the-badge&logo=React&logoColor=black"/>
  <img src="https://img.shields.io/badge/redux-764ABC?style=for-the-badge&logo=redux&logoColor=black">
  <img src="https://img.shields.io/badge/firebase-FFCA28?style=for-the-badge&logo=firebase&logoColor=white">
  <img src="https://img.shields.io/badge/firestore-FF7139?style=for-the-badge&logo=firebase&logoColor=white">
  <br />
  <img src="https://img.shields.io/badge/fontawesome-528DD7?style=for-the-badge&logo=font-awesome&logoColor=white">
  <img src="https://img.shields.io/badge/styled components-DB7093?style=for-the-badge&logo=styled-components&logoColor=white"/>
  <img src="https://img.shields.io/badge/mui-007FFF?style=for-the-badge&logo=mui&logoColor=white"/>
---
## ğŸ¤© ìƒˆë¡œ ë°°ìš°ê±°ë‚˜ ì§‘ì¤‘ì ìœ¼ë¡œ ê³µë¶€í•œ ê²ƒ
- Reduxì™€ Context-apië¥¼ ì´ìš©í•œ ì „ì—­ì ì¸ ìƒíƒœ ê´€ë¦¬
- Kakao Map API
- Firebaseì™€  Context APIë¥¼ ì´ìš©í•´ì„œ Authentication ìƒíƒœê´€ë¦¬
- Firestoreì— ë°ì´í„° ì €ì¥ ë° ê°€ì ¸ì˜¤ê¸°
---
## ğŸ”§ ì´ìŠˆ ë° í•´ê²°
### Authentication (src/contexts/AuthContext.js)
- Oauth ë¡œê·¸ì¸ ê³¼ì •ì—ì„œ propmtê°€ ëœ¨ì§€ ì•ŠëŠ” ë²„ê·¸ì— ì§ë©´í•˜ì˜€ì§€ë§Œ setCustomParametersë¥¼ ì´ìš©í•˜ì—¬ í•´ê²°í•˜ì˜€ê³  ë¹„ë™ê¸°ë¡œ Firestoreì— ë¡œê·¸ì¸ ìœ ì € ì •ë³´ë¥¼ ì €ì¥í•˜ì˜€ë‹¤.
- react hooksì„ ì‚¬ìš©í•˜ì—¬ userì˜ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ì˜€ë‹¤.

### Kakao Map API (src/contexts/KakaoContext.js)
- react hooksë¥¼ ì´ìš©í•˜ì—¬ Placeì— ê´€í•œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ì˜€ë‹¤.
- ê²€ìƒ‰í•  í‚¤ì›Œë“œ ê°’ì´ ë¹ˆ ê°’ì´ì—¬ë„ í‚¤ì›Œë“œ ê²€ìƒ‰ì„ í˜¸ì¶œí•´ì„œ 400 errorê°€ ë°œìƒí•˜ì˜€ê³ , í‚¤ì›Œë“œ ê°’ì´ ë¹ˆ ê°’ì¸ ê²½ìš° í‚¤ì›Œë“œ ê²€ìƒ‰ APIë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šê²Œ ì¡°ê±´ë¬¸ìœ¼ë¡œ ê°’ì„ ì²´í¬í•´ì£¼ì—ˆë‹¤.
```
function checkPlace() {
          if (!Place) {
            return false;
          } else {
            // í‚¤ì›Œë“œë¡œ ì¥ì†Œë¥¼ ê²€ìƒ‰
            ps.keywordSearch(Place, placesSearchCB);
          }
        }

checkPlace();
```
### CAFE LIST
- Mapì— ê²€ìƒ‰í•œ ì¥ì†Œë¥¼ Firestoreì™€ Redux ì‚¬ìš©í•˜ì—¬ CRUDë¥¼ ì§„í–‰ í•˜ì˜€ê³ , ì¹´í…Œê³ ë¦¬ ë¶€ë¶„ì„ ë”°ë¡œ ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ì—ˆëŠ”ë° ëª©ë¡ì´ ëœ¨ì§€ ì•Šì•„ ë‚œí™©ì„ ê²ªì—ˆì§€ë§Œ valueê°’ì„ ì˜ ì ìš©ì‹œì¼œ í•´ê²°í•˜ì˜€ë‹¤.
```
const AddCafeModal = ({ modal, setModal }) => {
  const { currentUser } = useAuth();
  const initialState = {
    user_id: currentUser.uid,
    place_name: "",
    address_name: "",
    reason: "",
  };
  const [state, setState] = useState(initialState);
  const { place_name, address_name, reason } = state;
  const [message, setMessage] = useState({ error: false, msg: "" });
  const dispatch = useDispatch();

  const handleChange = (e) => {
    let { name, value } = e.target;
    setState({ ...state, [name]: value });
  };

  const onCloseHandler = () => {
    setModal({});
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    setMessage("");

    if (place_name === "" || address_name === "" || reason === "") {
      setMessage({ error: true, msg: "ì¶”ê°€ê°€ ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤." });
      return;
    } else {
      setMessage({ error: false, msg: "ì¹´í˜ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤." });
    }

    dispatch(addCafeInitiate(state));
    setState({ place_name: "", address_name: "", reason: "" });
  };

  useEffect(() => {
    setState({ ...state, ...modal.content });
  }, [setState]);

  return (
    <Modal onSubmit={handleSubmit}>
      {message?.msg && (
        <Message
          variant={message?.error ? "danger" : "success"}
          onClose={() => setMessage("")}
        >
          {message?.msg}
        </Message>
      )}
      <Place value={modal.content}>
        <PlaceName name="place_name">
          <h2>{modal.content.place_name}</h2>
        </PlaceName>
        <AddressName name="address_name">
          <h3>{modal.content.address_name}</h3>
        </AddressName>
      </Place>
      <Category onChange={handleChange} name="reason" value={reason} />
      <ModalBtnBox>
        <AddBtn>ì¶”ê°€</AddBtn>
        <CancelBtn onClick={onCloseHandler}>ì·¨ì†Œ</CancelBtn>
      </ModalBtnBox>
    </Modal>
  );
};

```
- Dashboardë¥¼ êµ¬í˜„ì¤‘ì— ë¡œê·¸ì¸í•œ ìœ ì €ì˜ idì™€ ì¢‹ì•„ìš” ë° ì¹´í˜ë¥¼ ì¶”ê°€í•œ ìœ ì €ì˜ idê°€ ê°™ì„ ê²½ìš°ì—ë§Œ ì¢‹ì•„ìš”ë¥¼ ì·¨ì†Œí•  ìˆ˜ ìˆê³  ì¹´í˜ë¥¼ ì‚­ì œí•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•˜ì˜€ë‹¤.
```
const LikeCafe = ({ cafe }) => {
  const [likes, setLikes] = useState([]);
  const [hasLiked, setHasLiked] = useState(false);
  const { currentUser } = useAuth();

  const likeDocRef = collection(db, "posts", cafe.id, "likes");

  useEffect(() => {
    setHasLiked(likes.findIndex((like) => like.id === currentUser?.uid) !== -1);
  }, [likes]);

  useEffect(() => {
    onSnapshot(likeDocRef, (snapshot) => {
      setLikes(snapshot.docs);
    });
  }, [db, cafe.id]);

  const likePost = async () => {
    if (hasLiked) {
      await deleteDoc(doc(db, "posts", cafe.id, "likes", currentUser.uid));
    } else {
      await setDoc(doc(db, "posts", cafe.id, "likes", currentUser.uid), {
        username: currentUser.displayName,
      });
    }
  };

  return (
    <LikeButton onClick={likePost}>
      {hasLiked ? <FillHeart /> : <OutlineHeart />}
      <div>{likes.length > 0 && <p> {likes.length} likes</p>}</div>
    </LikeButton>
  );
};
```

### Firestore

#### POSTë¶€ë¶„
![firestore1](https://user-images.githubusercontent.com/83106932/197471084-28be9b3f-469d-4532-84c7-962554e8036b.png)
---
#### ì¢‹ì•„ìš” ë¶€ë¶„
![firestore2](https://user-images.githubusercontent.com/83106932/197471096-71d436b3-20e7-42c8-b495-8ec22f34f994.png)


## ê·¸ ì™¸ ì´ìŠˆëŠ” Issue ì¹´í…Œê³ ë¦¬ì— ìˆìœ¼ë©°, ì´ìŠˆ í•´ê²° í›„ ì´ìŠˆì— ëŒ€í•œ ì„¤ëª…ì€ Prì— ì˜¬ë ¤ë†“ì•˜ìŠµë‹ˆë‹¤.
---
## ë°°í¬
https://minecafe-web.netlify.app



